# ゲーム翻訳オーバーレイアプリケーション - 要件定義書

## 1. はじめに

### 1.1 目的
本文書は、ゲーム画面上にオーバーレイ表示する形でリアルタイムに翻訳を提供するデスクトップアプリケーション（以下、「本アプリケーション」）の要件を定義する。

### 1.2 適用範囲
本文書は、本アプリケーションの開発、テスト、およびリリースに関わる全ての関係者に適用される。

### 1.3 用語と略語
- **OCR**: 光学文字認識（Optical Character Recognition）
- **オーバーレイ**: ゲーム画面上に重ねて表示される透過UIのこと
- **クリックスルー**: オーバーレイ表示がマウスクリックを通過し、下のゲーム画面に影響を与えること

## 2. プロジェクトの基本方針

### 2.1 ユーザー没入体験の重視
ユーザーには本来のコンテンツ（ゲームや電子書籍）に完全に没入してほしいため、アプリケーションの存在感を最小限に抑える。複雑な設定や調整をユーザーに求めず、AIによる自動最適化を活用して、ユーザーが翻訳アプリを意識することなく使用できる体験を提供する。

### 2.2 幅広い対象アプリケーション
主要なターゲットは未翻訳のゲームだが、電子書籍リーダーなどのPC上で閲覧できる様々なコンテンツも対象とする。アプリケーション固有のUIに依存しない汎用的なテキスト認識・翻訳機能を提供する。

### 2.3 多言語対応
翻訳対象として日本語と英語の間の翻訳をメインとしつつも、他の言語ペアにも対応可能な拡張性の高い設計を採用する。言語自動検出機能により、ユーザーは使用言語を指定することなく利用できるようにする。

## 3. ユーザー要件

### 3.1 ユーザータイプ
- **一般ゲーマー**: 外国語版のゲームをプレイする一般的なユーザー
- **言語学習者**: ゲームを通じて語学を学習したいユーザー
- **開発者**: アプリケーションの拡張や修正を行う開発者
- **コンテンツクリエイター**: 実況やレビュー動画を制作するユーザー
- **電子書籍読者**: 未翻訳の電子書籍を読むユーザー

### 3.2 ユーザーニーズ
1. 外国語ゲーム（特に日本語・英語間）のテキストをリアルタイムに翻訳したい
2. ゲームプレイを妨げることなく翻訳文を表示してほしい
3. 特別な知識がなくても簡単に設定・使用できてほしい
4. 精度の高い翻訳結果を得たい
5. システムリソースを過度に消費せず、ゲームのパフォーマンスに影響を与えないでほしい
6. ゲーム以外のコンテンツ（電子書籍など）にも対応してほしい

## 4. 機能要件

### 4.1 基本機能
1. **OCR機能**
   - ゲーム画面からのテキスト認識
   - 複数の言語の文字認識対応（日本語、英語など）
   - テキスト領域の自動検出
   - テキスト変更の検出

2. **翻訳機能**
   - ローカル翻訳エンジンによる基本翻訳
   - オンラインAI翻訳連携（有料プラン）
   - 翻訳結果のキャッシュ
   - 言語の自動検出と適切な翻訳方向の選択

3. **オーバーレイ表示**
   - 原文テキスト直下または近くへの翻訳表示
   - クリックスルー機能
   - 画面の任意の場所に移動可能なUI
   - 透明度調整可能なUI

4. **設定とカスタマイズ**
   - 言語選択（翻訳元・翻訳先）
   - フォントサイズ・色・背景の調整
   - ホットキー設定
   - 表示位置のプリセット

### 4.2 拡張機能（Basicプラン）
1. **オンライン翻訳**
   - 制限付きのオンライン翻訳サービス利用
   - 基本的な機械翻訳機能
   
2. **高度なカスタマイズ**
   - 詳細なUIカスタマイズ
   - ユーザー辞書機能
   - 複数のプロファイル保存

### 4.3 プレミアム機能（Proプラン）
1. **AI翻訳**
   - GPT-4 VisionやGemini Pro Visionを活用した高品質翻訳
   - コンテキスト理解型の翻訳
   - 専門用語やゲーム特有の表現に対応

2. **高度なOCR最適化**
   - AI支援による最適OCR設定の自動適用
   - ゲームごとの最適化プロファイル作成・共有

3. **エクスポート機能**
   - 翻訳結果の保存
   - 学習用単語リストの作成

## 5. 非機能要件

### 5.1 性能要件
1. **応答時間**
   - テキスト検出から翻訳表示までを1秒以内に処理
   - UIの操作に対して0.2秒以内の応答

2. **リソース使用**
   - CPU使用率: アイドル時5%以下、処理時20%以下
   - メモリ使用量: 300MB以下
   - ストレージ要件: 基本インストール100MB以下

3. **同時処理能力**
   - 複数のテキスト領域の同時処理
   - 処理中でもUIの応答性を維持

### 5.2 信頼性要件
1. **安定性**
   - 長時間使用での安定動作（8時間以上）
   - クラッシュ発生率0.1%以下
   - メモリリークの防止

2. **エラー処理**
   - エラー発生時の適切な回復メカニズム
   - ユーザーへの明確なエラー通知
   - 継続使用可能なフォールバックモード

### 5.3 セキュリティ要件
1. **API管理**
   - APIキーの安全な暗号化と保存
   - ユーザー間での安全なキー共有

2. **データ保護**
   - 翻訳キャッシュの安全な保存
   - 設定ファイルの適切なアクセス制御

3. **プライバシー**
   - 必要最小限のデータ収集
   - 翻訳対象テキストの匿名化処理

### 5.4 互換性要件
1. **プラットフォーム**
   - Windows 10, 11（64ビット）対応
   - 将来的なWindows更新への対応

2. **ゲーム互換性**
   - DirectX, OpenGLベースの様々なゲームに対応
   - フルスクリーン/ウィンドウモードの両方に対応
   - ハイDPIディスプレイ対応

3. **コンテンツ互換性**
   - 電子書籍リーダーなどゲーム以外のアプリケーションにも対応
   - 様々なフォントやレイアウトへの対応

### 5.5 保守性要件
1. **コード構造**
   - モジュール化された設計
   - 適切なドキュメント
   - 拡張性のあるアーキテクチャ

2. **デバッグ機能**
   - 詳細なログ記録
   - 診断モード
   - エラーレポート機能

### 5.6 ユーザビリティ要件
1. **UIデザイン**
   - 直感的な操作
   - 最小限の存在感
   - 統一されたデザイン言語

2. **アクセシビリティ**
   - 色覚異常への配慮
   - スケーラブルなフォントサイズ
   - キーボード操作のサポート

3. **インストール・セットアップ**
   - 簡単なインストール手順
   - ガイド付き初期設定
   - 自動更新機能

## 6. 制約条件

### 6.1 技術的制約
1. **.NET Framework 4.8**を使用したC#実装
2. **PaddleOCR**をOCRエンジンとして使用
3. **Windows Forms**をUIフレームワークとして使用

### 6.2 ビジネス制約
1. **無料版**と**有料版**の機能差別化
2. **API使用量**のコスト管理
3. **ライセンス管理**システムの実装

### 6.3 運用上の制約
1. **アンチチート**システムとの競合回避
2. **ゲーム利用規約**への準拠
3. **翻訳API**の利用制限の考慮

## 7. 要件の優先順位と実装状況

### 7.1 必須要件（Must Have）
1. 基本的なOCR機能 - **開発中**
2. ローカル翻訳機能 - **開発中**
3. オーバーレイ表示機能 - **開発中**
4. 基本的な設定機能 - **開発中**
5. 安定動作とリソース最適化 - **開発中**

### 7.2 重要要件（Should Have）
1. AIによるOCR最適化 - **開発中**
2. 翻訳キャッシュ機能 - **開発中**
3. 言語自動検出 - **開発中**
4. エラー処理と回復機能 - **計画中**
5. UI/UXのカスタマイズ - **計画中**

### 7.3 追加要件（Could Have）
1. オンラインAI翻訳連携 - **計画中**
2. ゲームプロファイル管理 - **開発中**
3. ユーザー辞書機能 - **未着手**
4. マルチディスプレイ対応 - **未着手**
5. エクスポート機能 - **未着手**

### 7.4 将来要件（Won't Have Now）
1. マルチプラットフォーム対応 - **将来検討**
2. コミュニティ機能 - **将来検討**
3. 音声認識・翻訳 - **将来検討**
4. 自動パッチ機能 - **将来検討**

## 8. 前提条件と依存関係

### 8.1 前提条件
1. ユーザーはWindows 10/11（64ビット）環境を使用
2. インターネット接続が利用可能（オンライン翻訳時）
3. グラフィックスドライバが最新状態に更新されている

### 8.2 依存関係
1. **PaddleOCR**エンジンの安定性と精度
2. **LibreTranslate**サーバーの稼働状態
3. **OpenAI/Google**のAPIサービス提供状況
4. **Stripe**決済システムの機能

## 9. 多言語対応

### 9.1 対応言語
- **第一段階（初期リリース）**: 日本語⇄英語
- **第二段階（将来拡張）**: ユーザーニーズに応じて他の言語ペアを追加

### 9.2 言語検出
- テキスト特性に基づく自動言語検出
- 最適な翻訳方向の自動選択
- 混合言語テキストへの対応

## 10. 参考情報

### 10.1 競合製品
1. Game Translate
2. Capture2Text
3. TextGrabber

### 10.2 関連ドキュメント
1. [プロジェクト概要](../01-overview/project-overview.md)
2. [OCR処理仕様書](../02-design/components/ocr-component.md)
3. [翻訳処理仕様書](../02-design/components/translation-component.md)
4. [UI設計仕様書](../02-design/components/ui-component.md)
5. [プロジェクト構造解説](../02-design/data-flow.md)
